<!DOCTYPE html>
<html>
<head>
<title>upload file</title>
</head>
<body>
	
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
</script>

<div>
 <!--
 <img="src_image" 
      style="width: 200px;height:200px;border-radius: 100%"
      src="https://img2018.cnblogs.com/blog/1195302/201811/1195302-20181128163006342-890300325.jpg"/>
  -->
  <img id="src_image" style="width: 400px; height:300px; border-radius:10%; border:solid 1px red;"/>
</div>

<input type="file"  id="input"/ >
	
<div>
 <!--
 <img="src_img" 
      style="width: 200px;height:200px;border-radius: 100%"
      src="https://img2018.cnblogs.com/blog/1195302/201811/1195302-20181128163006342-890300325.jpg"/>
  -->
  <img id="dst_img" style="width: 400px; height:300px; border-radius:10%; border:solid 1px red;"/>
</div>

<script type="text/javascript">

$("input").change(function(){
	var files = document.getElementById('input').files  
	$("#src_img").attr("src", window.URL.createObjectURL(files[0]));
});

function image2Base64(img) {
    var canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;
    var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, img.width, img.height);
    var dataURL = canvas.toDataURL("image/png");
    return dataURL;
}

$("src_img").load((event) => {
  var base64 = image2Base64(event.target);
  console.log("image is:", event.target);
  console.log("base64 is:", base64); 
  $("#dst_img").attr("src", base64);
});

</script>
</body>
</html>
